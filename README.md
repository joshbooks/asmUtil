# asmUtil
This was really cool to make, but I'm not sure if it makes any sense to use this when [radare2](https://github.com/radare/radare2/) exists...

## scripts
- `scripts/getOpcodes.sh` takes lines of x86-64 nasm assembly and converts them into opcodes, pipe in a file or use it as an interactive assembler.
- `scripts/functions.inc` provides the execWithOpcode function that accepts two bash "lamdas" as arguments, see the location of PLACEHOLDER 1 and PLACEHOLDER 2 in getOpcodes for all avaiable variables. The first can execute against $byte, which will be filled with each byte of each opcode in turn, the second can execute against $opCode which will be filled with the byte sequence making up each opcode in turn
- `scripts/getPushes.sh` takes lines of x86-64 nasm assembly and at the end spits out pushAsm.asm containing (hopefully) legal push instructions containing the opcodes of the instructions taken from stdin with the byte order of the opcodes reversed to facilitate calling rsp, followed by the `call rsp` instruction. It also creates `opcodesToPush`, a file conatining lines consisting of one ascii ascii hex byte each. 
- `scripts/bytesToAsm.sh` takes lines from stdin consisting of one ascii hex byte(like the ones found in the output of `getOpcodes.sh` and `getPushes.sh`) each and shows you what assembly instructions the sequencer would make of them
- `make` takes one argument, let's call it `$filename`. `make` will generate an elf-64 binary from a Nasm x86_64 assembly program named "`$filename`.asm" Along the way it might generate a warning about a missing `_start` label. I'm still working on that. The binary should still work.

## gadgets
- `gadgets/exit.asm` calls the exit syscall. Clobbers rax
- `gadgets/exit0.asm` zeroes rdi and calls the exit syscall. Clobbers rax, rdi
- `gadgets/pushEpilogue.asm` calls rsp, automatically added to the end of programs generated by 
  `scripts/getPushes.sh`. Clobbers rsp, stack
- `gadgets/pushExample.asm` inserts 4 into dil, the lowest byte of rdi, which is the register 
   used as the return code by the exit syscall. Clobbers dil, rsp, stack
   
 ## working example
 ```
 ./scripts/getPushes.sh < gadgets/pushExample.asm
 cat gadgets/exit.asm >> pushAsm.asm
 make pushAsm
 ./!$
 echo $?
 ```
